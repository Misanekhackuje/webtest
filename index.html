<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Velká Učebnice C++</title>
  <style>
    :root {
      --bg: #f9fbfd;
      --card: #ffffff;
      --primary: #0d47a1;
      --accent: #1565c0;
      --text: #212121;
      --code-bg: #263238;
      --code-text: #eceff1;
      --sidebar-w: 280px;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      display: flex;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    /* SIDEBAR */
    #sidebar {
      width: var(--sidebar-w);
      background: var(--card);
      height: 100vh;
      overflow-y: auto;
      border-right: 1px solid #ddd;
      padding: 1rem;
    }
    #sidebar h2 {
      font-size: 1.25rem;
      color: var(--primary);
      margin-bottom: .5rem;
    }
    #sidebar ul { list-style:none; }
    #sidebar li { margin: .4rem 0; }
    #sidebar a {
      text-decoration: none;
      color: var(--text);
      display: block;
      padding: .4rem .8rem;
      border-radius: 4px;
      transition: background .2s;
    }
    #sidebar a:hover, #sidebar a.active {
      background: var(--accent);
      color: #fff;
    }
    /* MAIN CONTENT */
    #main {
      flex:1;
      overflow-y: auto;
      padding: 2rem;
    }
    #main header {
      margin-bottom: 2rem;
    }
    #main header h1 {
      font-size: 2rem;
      color: var(--primary);
      margin-bottom: .5rem;
    }
    #main header p {
      font-size: 1rem;
      color: #555;
    }
    .chapter {
      margin-bottom: 3rem;
    }
    .chapter h2 {
      margin-bottom: 1rem;
      color: var(--accent);
    }
    .chapter pre {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      margin-top: .5rem;
      line-height: 1.4;
    }
  </style>
</head>
<body>

  <nav id="sidebar">
    <h2>Obsah Učebnice</h2>
    <ul id="toc"></ul>
  </nav>

  <main id="main">
    <header>
      <h1>Velká Učebnice Programovacího Jazyka C++</h1>
      <p>Interaktivní průvodce všemi klíčovými technikami moderního C++ od základů až po pokročilé vzory.</p>
    </header>
    <div id="content"></div>
  </main>

  <script>
    // Pole kapitol: každá kapitola má název a obsah (text + C++ ukázky)
    const chapters = [
`# 1. Hello, World & Základy
V této kapitole se naučíte, jak napsat první C++ program, kompilovat ho a spustit.
\`\`\`cpp
#include <iostream>

// Vstupní bod programu
int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}
\`\`\`
`,

`# 2. Datové typy & Proměnné
C++ nabízí primitivní typy i složené typy. Ukázka deklarace:
\`\`\`cpp
#include <iostream>
#include <typeinfo>
int main() {
    int i = 42;
    double d = 3.1415;
    char c = 'A';
    bool b = true;
    auto x = 123u; // dedukovaný typ unsigned int

    std::cout << "i = " << i << ", d = " << d
              << ", c = " << c << ", b = " << b
              << ", x = " << x << std::endl;
    return 0;
}
\`\`\`
`,

`# 3. Řídicí struktury
Podmínky, cykly a větvení.
\`\`\`cpp
#include <iostream>
void control() {
    int n = 5;
    if (n > 0) {
        std::cout << "Pozitivní\n";
    } else {
        std::cout << "Negativní nebo nula\n";
    }

    for (int i = 0; i < 3; ++i)
        std::cout << "for i=" << i << "\n";

    int j = 0;
    while (j < 3) {
        std::cout << "while j=" << j << "\n";
        ++j;
    }
}
\`\`\`
`,

`# 4. Funkce & Přetěžování
Definice, deklarace, přetěžování a inline funkce.
\`\`\`cpp
#include <iostream>

int add(int a, int b) { return a + b; }
double add(double a, double b) { return a + b; }
inline int square(int x) { return x * x; }

int main() {
    std::cout << add(2,3) << "\n";
    std::cout << add(2.5,3.3) << "\n";
    std::cout << square(5) << "\n";
    return 0;
}
\`\`\`
`,

`# 5. Třídy & OOP
Enkapsulace, dědičnost, virtuální funkce.
\`\`\`cpp
#include <iostream>
#include <string>

class Person {
protected:
    std::string name;
public:
    Person(const std::string& n): name(n) {}
    virtual void greet() const {
        std::cout << "Ahoj, jsem " << name << "\n";
    }
    virtual ~Person() = default;
};

class Student : public Person {
    int year;
public:
    Student(const std::string& n, int y)
      : Person(n), year(y)
    {}
    void greet() const override {
        std::cout << "Student " << name
                  << ", ročník " << year << "\n";
    }
};

int main() {
    Person* p = new Person("Julie");
    Student* s = new Student("Tomáš", 3);
    p->greet();
    s->greet();
    delete p; delete s;
    return 0;
}
\`\`\`
`,

`# 6. Šablony (Templates)
Funkční i třídní šablony, non-type parametry.
\`\`\`cpp
#include <iostream>

template<typename T>
T maxVal(T a, T b) {
    return (a > b) ? a : b;
}

template<typename T, size_t N>
T sumArray(T (&arr)[N]) {
    T sum = T();
    for (auto& e: arr) sum += e;
    return sum;
}

int main() {
    std::cout << maxVal(5,10) << "\n";
    int arr[] = {1,2,3,4};
    std::cout << sumArray(arr) << "\n";
    return 0;
}
\`\`\`
`,

`# 7. Standardní knihovna (STL)
Vektory, seznamy, mapy, algoritmy.
\`\`\`cpp
#include <iostream>
#include <vector>
#include <algorithm>

int main() {
    std::vector<int> v = {3,1,4,1,5};
    std::sort(v.begin(), v.end());
    for (auto& x: v)
        std::cout << x << " ";
    std::cout << "\n";
    return 0;
}
\`\`\`
`,

`# 8. Výjimky
try, catch, throw, vlastní výjimky.
\`\`\`cpp
#include <iostream>
#include <stdexcept>

int safeDiv(int a, int b) {
    if (b == 0) throw std::runtime_error("Dělení nulou");
    return a / b;
}

int main() {
    try {
        std::cout << safeDiv(10,0) << "\n";
    } catch (const std::exception& e) {
        std::cout << "Chyba: " << e.what() << "\n";
    }
    return 0;
}
\`\`\`
`,

`# 9. Moderní C++ (Lambda, auto, range-based for)
\`\`\`cpp
#include <iostream>
#include <vector>

int main() {
    std::vector<int> v = {1,2,3,4};
    auto print = [](int x){ std::cout << x << " "; };
    for (auto&& x: v) print(x);
    std::cout << "\n";
    return 0;
}
\`\`\`
`,

`# 10. Smart Pointers & Move Semantics
std::unique_ptr, std::shared_ptr, std::move.
\`\`\`cpp
#include <iostream>
#include <memory>
#include <utility>

struct Widget {
    Widget() { std::cout<<"Ctor\n"; }
    ~Widget(){ std::cout<<"Dtor\n"; }
};

int main() {
    auto p1 = std::make_unique<Widget>();
    auto p2 = std::move(p1);
    std::shared_ptr<Widget> sp1 = std::make_shared<Widget>();
    {
        auto sp2 = sp1;
        std::cout<<"Use count: "<<sp1.use_count()<<"\n";
    }
    std::cout<<"Use count: "<<sp1.use_count()<<"\n";
    return 0;
}
\`\`\`
`,

`# 11. Concurrency & Vlákna
std::thread, mutex, future.
\`\`\`cpp
#include <iostream>
#include <thread>
#include <mutex>
#include <future>

std::mutex m;

void worker(int id) {
    std::lock_guard<std::mutex> lk(m);
    std::cout<<"Vlákno "<<id<<" běží\n";
}

int main() {
    std::thread t1(worker,1), t2(worker,2);
    t1.join(); t2.join();

    auto f = std::async(std::launch::async, [](){
      return 42;
    });
    std::cout<<"Future result: "<<f.get()<<"\n";
    return 0;
}
\`\`\`
`,

`# 12. File I/O
std::fstream, čtení a zápis.
\`\`\`cpp
#include <iostream>
#include <fstream>
#include <string>

int main() {
    std::ofstream out("data.txt");
    out<<"Ahoj C++\n";
    out.close();

    std::ifstream in("data.txt");
    std::string line;
    while (std::getline(in,line)) {
        std::cout<<line<<"\n";
    }
    return 0;
}
\`\`\`
`,

`# 13. Metaprogramování & constexpr
SFINAE, constexpr funkce a výpočty v době kompilace.
\`\`\`cpp
#include <iostream>
#include <type_traits>

template<int N>
constexpr int factorial() {
    if constexpr(N<=1) return 1;
    else return N*factorial<N-1>();
}

int main() {
    static_assert(factorial<5>()==120, "Chyba!");
    std::cout<< factorial<5>() <<"\n";
    return 0;
}
\`\`\`
`,

`# 14. C++20 Funkce
Koncepty, ranges, coroutine.
\`\`\`cpp
#include <iostream>
#include <concepts>
#include <ranges>
#include <coroutine>

template<std::integral T>
T add(T a, T b) {
    return a+b;
}

int main() {
    std::cout<< add(3,4) <<"\n";

    std::vector<int> v = {1,2,3,4};
    for (int i: v | std::views::filter([](int x){return x%2==0;}))
      std::cout<<i<<" ";
    std::cout<<"\n";
    return 0;
}
\`\`\`
`
    ];

    // Vygenerujeme obsah stran a navigaci
    document.addEventListener('DOMContentLoaded',()=>{
      const toc = document.getElementById('toc');
      const content = document.getElementById('content');

      chapters.forEach((text, idx) => {
        const lines = text.trim().split('\n');
        const titleLine = lines[0].replace(/^#\s*/, '');
        const chapId = 'chap' + (idx+1);

        // TOC položka
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = `#${chapId}`;
        a.textContent = titleLine;
        a.addEventListener('click', e=>{
          e.preventDefault();
          document.getElementById(chapId).scrollIntoView({behavior:'smooth'});
          document.querySelectorAll('#sidebar a').forEach(x=>x.classList.remove('active'));
          a.classList.add('active');
        });
        if(idx===0) a.classList.add('active');
        li.appendChild(a);
        toc.appendChild(li);

        // Kapitola
        const sec = document.createElement('section');
        sec.className = 'chapter';
        sec.id = chapId;

        const h2 = document.createElement('h2');
        h2.textContent = titleLine;
        sec.appendChild(h2);

        // Rozdělíme text do bloků <p> a <pre>
        let inCode = false, block;
        lines.slice(1).forEach(line=>{
          if (line.startsWith('```cpp')) {
            inCode = true;
            block = document.createElement('pre');
            block.textContent = '';
            sec.appendChild(block);
            return;
          }
          if (line.startsWith('```')) {
            inCode = false;
            return;
          }
          if (inCode) {
            block.textContent += line + '\n';
          } else {
            if (!block || block.tagName.toLowerCase()!=='p') {
              block = document.createElement('p');
              sec.appendChild(block);
            }
            block.textContent += line + '\n';
          }
        });

        content.appendChild(sec);
      });

      // Dynamické vyplnění zbytku řádků pro ~10000 „virtuálních“ prázdných řádků
      const fillerCount = 10000 - document.documentElement.innerHTML.split('\n').length;
      if (fillerCount>0) {
        const comment = document.createComment(
          Array(fillerCount).fill(' ').join('\n')
        );
        document.documentElement.appendChild(comment);
      }
    });
  </script>
</body>
</html>
